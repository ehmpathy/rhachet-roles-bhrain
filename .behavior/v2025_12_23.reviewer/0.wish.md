wish =

we had an src/roles/reviewer

which had two skills

skill1. = `review.sh`
- input =
  - --rules $glob = the glob of rule files to look at
    - supports positive globs
    - supports negative globs with `!` prefix
  - --diffs {since-main, since-commit, since-staged}
    - specifies which git diffs to look at, when specified
    - only allows one declaration of --diffs to be specified
  - --paths $glob = the glob of target files to look at
    - supports positive globs
    - supports negative globs with `!` prefix
    - can have multiple --paths args at a time
    - can be added onto --diffs
      - i.e., review these diffs PLUS these paths
  - --output $path

- output =
  - emits into the --output $path a [feedback].[given].by_robot.md
  - follows the tempate of .behavior/v2025_12_23.reviewer/.ref.[feedback].v1.[given].by_human.md

---

- mechanism =
  - uses a shell command to enumerate the files matched by --rules
  - uses a shell command to enumerate the files matched by --paths
  - uses a shell command to enumerate the files matched by --diffs + the ranges

  - then, supports two modes
    - --soft = builds the prompt with just the paths enumerated and requests them to be opened
    - --hard = builds the prompt with the contents of those files injected, to gaurantee the agent will load them into context
      - should failfast if the token count will exceed context limit in this mode
      - should also emit an estimate of token count and approximate token cost

  - in both modes, should emit a
    - .log/bhrain/review/$timestamp/input.args.json, input.prompt.md, and output.json
    - input.args.json declares
      - the inputs that the skill was invoked with
      - all of the paths evaluated (--rules, --paths, --diffs)
      - stats on the total tokens
    - input.prompt.md declares the compiled prompt that was produced
    - output.response.json = the exact output that the brain returned (e.g., the claude resopnse json)
    - output.review.md = the formatted review markdown

  - in both modes,
    - the compiled prompt should be invoked against the specified brain
      - for now, the only brain we need to support is `replic:anthropic:claude-code`, via the claude-code cli


----

ideally, we'd also support an --interactive mode, where we can see the review progress
