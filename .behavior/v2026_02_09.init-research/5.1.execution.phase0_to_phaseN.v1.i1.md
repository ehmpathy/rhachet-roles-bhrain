# execution: init.research skill

## progress tracker

phases 0, 1, 4 can run in parallel. phases 2, 3, 5, 6, 7 are sequential after dependencies.

---

## phase 0: templates

**status**: ğŸ”„ active

### checklist

- [ ] create `src/domain.operations/research/init/templates/` directory
- [ ] create `0.wish.md` template
- [ ] create `1.1.probes.aim.internal.stone` template
- [ ] create `1.2.probes.aim.external.stone` template
- [ ] create `1.3.probes.aim.blend.stone` template
- [ ] create `2.probes.emit.stone` template
- [ ] create `3.1.probes.absorb.kernels.stone` template
- [ ] create `3.2.probes.absorb.clusters.stone` template
- [ ] create `3.3.probes.absorb.gaps.stone` template
- [ ] create `4.probes.remit.stone` template
- [ ] create `5.1.briefs.curate.blueprint.stone` template
- [ ] create `5.2.briefs.curate.execute.stone` template

---

## phase 1: domain operations (bind)

**status**: â³ queued

### checklist

- [ ] create `src/domain.operations/research/init/` directory structure
- [ ] create `setResearchBind.ts` â€” bind branch to research directory
- [ ] create `setResearchBind.test.ts` â€” unit tests
- [ ] create `getResearchBind.ts` â€” get bound research for current branch
- [ ] create `getResearchBind.test.ts` â€” unit tests
- [ ] create `delResearchBind.ts` â€” unbind research from branch
- [ ] create `delResearchBind.test.ts` â€” unit tests
- [ ] create `.test/setup.ts` â€” fixture paths
- [ ] create `.test/assets/research.empty/` â€” fixture directory
- [ ] create `.test/assets/research.bound/` â€” fixture directory with pre-bound research

---

## phase 2: domain operations (init)

**status**: â³ queued (blocked by phase 0, 1)

### checklist

- [ ] create `initResearchDir.ts` â€” main domain operation
- [ ] create `initResearchDir.test.ts` â€” unit tests
- [ ] verify template enumeration logic
- [ ] verify findsert semantics (create if absent, skip if present)
- [ ] verify `$RESEARCH_DIR_REL` substitution
- [ ] verify `setResearchBind` integration

---

## phase 3: integration tests

**status**: â³ queued (blocked by phase 1, 2)

### checklist

- [ ] create `initResearchDir.integration.test.ts`
- [ ] create `setResearchBind.integration.test.ts`
- [ ] test filesystem operations end-to-end
- [ ] test git branch detection
- [ ] test temp directory cleanup

---

## phase 4: librarian role

**status**: â³ queued

### checklist

- [ ] create `src/domain.roles/librarian/getLibrarianRole.ts`
- [ ] update `src/domain.roles/librarian/.readme.[seed].md` with skill info
- [ ] create `src/domain.roles/librarian/skills/` directory
- [ ] create `src/domain.roles/librarian/skills/init.research.sh` shell entrypoint
- [ ] create portable symlink `src/domain.roles/librarian/briefs/knowledge` â†’ `../../thinker/briefs/knowledge`
- [ ] register librarian role in role registry (if applicable)

---

## phase 5: cli entrypoint

**status**: â³ queued (blocked by phase 2, 4)

### checklist

- [ ] create `src/contract/cli/initResearch.ts`
- [ ] implement `parseArgs` for `--name`, `--dir`, `--open`, `--help`
- [ ] implement `printHelp` function
- [ ] implement validation before expensive operations
- [ ] invoke `initResearchDir` domain operation
- [ ] update `src/contract/cli/index.ts` to export `cli.research.init`

---

## phase 6: acceptance tests

**status**: â³ queued (blocked by phases 0-5)

### checklist

- [ ] create `blackbox/.test/invokeResearchSkill.ts` helper
- [ ] create `blackbox/.test/assets/research-fixture/` fixture directory
- [ ] create `blackbox/init.research.acceptance.test.ts`
- [ ] test full skill invocation via `rhachet roles link` â†’ shell entrypoint
- [ ] test idempotency (run twice, second run keeps files)
- [ ] test error cases (main branch, pre-bound different research)

---

## phase 7: build validation

**status**: â³ queued (blocked by phases 0-6)

### checklist

- [ ] run full build
- [ ] run all test suites
- [ ] verify `rhachet roles link --role librarian` works
- [ ] verify skill invocation works end-to-end

---

## notes

_execution notes will be added here as work progresses_

