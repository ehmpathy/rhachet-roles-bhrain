// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing

exports[`formatGuardTree given: [case1] reviews+judges, allowed, all fresh â€” 2 reviews (0 blockers, 3 blockers) and 1 judge (passed) when: [t0] called with fresh results then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = allowed
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 1.vision.v1.md
      â”œâ”€ reviews
      â”‚   â”œâ”€ r1: reviewer/reflect
      â”‚   â”‚   â”œâ”€ finished 8.2s âœ“
      â”‚   â”‚   â””â”€ review: .route/1.vision.guard.review.i1.abc123.r1.md
      â”‚   â””â”€ r2: reviewer/review
      â”‚       â”œâ”€ finished 15.1s âœ“
      â”‚       â”œâ”€ review: .route/1.vision.guard.review.i1.abc123.r2.md
      â”‚       â”œâ”€ 3 blockers ðŸ”´
      â”‚       â””â”€ 1 nitpick ðŸŸ 
      â””â”€ judges
          â””â”€ j1: reviewed?
              â”œâ”€ finished 0.8s âœ“
              â””â”€ judge: .route/1.vision.guard.judge.i1p1.abc123.def456.j1.md"
`;

exports[`formatGuardTree given: [case2] reviews+judges, blocked, all fresh â€” 1 review (1 blocker) and 1 judge (failed) when: [t0] called with blocked results then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 3.1.research.domain
   â”œâ”€ passage = blocked
   â”œâ”€ reason = blockers exceed threshold (1 > 0)
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 3.1.research.domain._.v1.md
      â”œâ”€ reviews
      â”‚   â””â”€ r1: reviewer/reflect
      â”‚       â”œâ”€ finished 12.4s âœ“
      â”‚       â”œâ”€ review: .route/3.1.research.domain.guard.review.i1.abc123.r1.md
      â”‚       â””â”€ 1 blocker ðŸ”´
      â””â”€ judges
          â””â”€ j1: reviewed?
              â”œâ”€ finished 0.8s âœ—
              â”œâ”€ judge: .route/3.1.research.domain.guard.judge.i1p1.abc123.def456.j1.md
              â””â”€ reason: blockers exceed threshold (1 > 0)"
`;

exports[`formatGuardTree given: [case3] some cached reviews â€” 1 cached + 1 fresh review, 1 judge when: [t0] called with mixed cache state then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = allowed
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 1.vision.v1.md
      â”œâ”€ reviews
      â”‚   â”œâ”€ r1: reviewer/reflect
      â”‚   â”‚   â””â”€ Â· cached
      â”‚   â””â”€ r2: reviewer/review
      â”‚       â”œâ”€ finished 10.3s âœ“
      â”‚       â”œâ”€ review: .route/1.vision.guard.review.i1.abc123.r2.md
      â”‚       â””â”€ 2 nitpicks ðŸŸ 
      â””â”€ judges
          â””â”€ j1: reviewed?
              â”œâ”€ finished 0.5s âœ“
              â””â”€ judge: .route/1.vision.guard.judge.i1p1.abc123.def456.j1.md"
`;

exports[`formatGuardTree given: [case4] all cached â€” all reviews + judges cached when: [t0] called with all cached then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = allowed
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 1.vision.v1.md
      â”œâ”€ reviews
      â”‚   â””â”€ r1: reviewer/reflect
      â”‚       â””â”€ Â· cached
      â””â”€ judges
          â””â”€ j1: reviewed?
              â””â”€ Â· cached"
`;

exports[`formatGuardTree given: [case5] unguarded stone â€” no guard input when: [t0] called with no guard then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â””â”€ passage = allowed (unguarded)"
`;

exports[`formatGuardTree given: [case6] artifacts only guard â€” no reviews or judges when: [t0] called with empty reviews and judges then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = allowed (artifacts only)
   â””â”€ guard
      â””â”€ artifacts
          â””â”€ 1.vision.v1.md"
`;

exports[`formatGuardTree given: [case7] multiple artifacts â€” 3 artifact files when: [t0] called with 3 artifacts then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 3.1.research.domain
   â”œâ”€ passage = allowed
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â”œâ”€ 3.1.research.domain._.v1.md
      â”‚   â”œâ”€ 3.1.research.domain.terms.v1.md
      â”‚   â””â”€ 3.1.research.domain.refs.v1.md
      â”œâ”€ reviews
      â”‚   â””â”€ r1: reviewer/reflect
      â”‚       â”œâ”€ finished 5.0s âœ“
      â”‚       â””â”€ review: .route/3.1.research.domain.guard.review.i1.abc123.r1.md
      â””â”€ judges
          â””â”€ j1: reviewed?
              â”œâ”€ finished 0.3s âœ“
              â””â”€ judge: .route/3.1.research.domain.guard.judge.i1p1.abc123.def456.j1.md"
`;

exports[`formatGuardTree given: [case8] review with nitpicks only â€” 0 blockers, 2 nitpicks when: [t0] called with nitpicks only then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = allowed
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 1.vision.v1.md
      â”œâ”€ reviews
      â”‚   â””â”€ r1: reviewer/reflect
      â”‚       â”œâ”€ finished 7.0s âœ“
      â”‚       â”œâ”€ review: .route/1.vision.guard.review.i1.abc123.r1.md
      â”‚       â””â”€ 2 nitpicks ðŸŸ 
      â””â”€ judges
          â””â”€ j1: reviewed?
              â”œâ”€ finished 0.3s âœ“
              â””â”€ judge: .route/1.vision.guard.judge.i1p1.abc123.def456.j1.md"
`;

exports[`formatGuardTree given: [case9] review with both blockers and nitpicks â€” 3 blockers, 1 nitpick when: [t0] called with both then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = blocked
   â”œâ”€ reason = blockers exceed threshold (3 > 0)
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 1.vision.v1.md
      â”œâ”€ reviews
      â”‚   â””â”€ r1: reviewer/reflect
      â”‚       â”œâ”€ finished 12.0s âœ“
      â”‚       â”œâ”€ review: .route/1.vision.guard.review.i1.abc123.r1.md
      â”‚       â”œâ”€ 3 blockers ðŸ”´
      â”‚       â””â”€ 1 nitpick ðŸŸ 
      â””â”€ judges
          â””â”€ j1: reviewed?
              â”œâ”€ finished 0.4s âœ—
              â”œâ”€ judge: .route/1.vision.guard.judge.i1p1.abc123.def456.j1.md
              â””â”€ reason: blockers exceed threshold (3 > 0)"
`;

exports[`formatGuardTree given: [case10] cached judge that had failed â€” shows cached, omits reason when: [t0] called with cached failed judge then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = allowed
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 1.vision.v1.md
      â”œâ”€ reviews
      â”‚   â””â”€ r1: reviewer/reflect
      â”‚       â””â”€ Â· cached
      â””â”€ judges
          â””â”€ j1: reviewed?
              â””â”€ Â· cached"
`;

exports[`formatGuardTree given: [case11] passage with reason â€” blocked + combined reasons when: [t0] called with blocked and reason then: output matches snapshot 1`] = `
"ðŸ—¿ route.stone.set
   â”œâ”€ stone = 1.vision
   â”œâ”€ passage = blocked
   â”œâ”€ reason = judge 1 failed; judge 2 failed
   â””â”€ guard
      â”œâ”€ artifacts
      â”‚   â””â”€ 1.vision.v1.md
      â”œâ”€ reviews
      â”‚   â””â”€ r1: reviewer/reflect
      â”‚       â”œâ”€ finished 5.0s âœ“
      â”‚       â”œâ”€ review: .route/1.vision.guard.review.i1.abc123.r1.md
      â”‚       â””â”€ 2 blockers ðŸ”´
      â””â”€ judges
          â”œâ”€ j1: reviewed?
          â”‚   â”œâ”€ finished 0.3s âœ—
          â”‚   â”œâ”€ judge: .route/1.vision.guard.judge.i1p1.abc123.def456.j1.md
          â”‚   â””â”€ reason: judge 1 failed
          â””â”€ j2: approved?
              â”œâ”€ finished 0.2s âœ—
              â”œâ”€ judge: .route/1.vision.guard.judge.i1p1.abc123.def456.j2.md
              â””â”€ reason: judge 2 failed"
`;
