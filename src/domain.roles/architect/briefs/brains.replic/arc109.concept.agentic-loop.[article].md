# agentic-loop

## .what

the core execution pattern of replic brains: repeatedly generate llm response, check for tool calls, execute tools, append results, and continue until task completion.

## .why

the agentic loop is what transforms a stateless llm into a persistent, goal-directed agent. by iterating through generate → execute → observe cycles, the agent can accomplish complex multi-step tasks that exceed what a single generation could produce.

## dependsOn

- `llm` — generates responses and tool calls
- `repl` — the agentic loop is the repl pattern applied to llms
- `tool-call` — actions to execute
- `tool-result` — feedback from actions
- `context-window` — accumulates conversation history

## pseudocode

```python
while True:
    response = llm.generate(context_window)

    if response.has_tool_calls:
        for tool_call in response.tool_calls:
            result = execute_tool(tool_call)
            context_window.append(result)
    else:
        return response  # task complete, exit loop
```

## key characteristics

- **unbounded iteration**: continues until llm stops calling tools
- **context accumulation**: history grows with each turn
- **goal-directed**: llm decides when task is complete
- **interruptible**: user can inject messages mid-loop

## termination conditions

| condition          | trigger                         |
| ------------------ | ------------------------------- |
| natural completion | llm responds without tool calls |
| context exhaustion | context window fills up         |
| user interruption  | user sends new message          |
| timeout            | max iterations or time exceeded |
| error              | unrecoverable tool failure      |

## variants

| variant     | modification                         |
| ----------- | ------------------------------------ |
| react       | interleave explicit reasoning traces |
| reflexion   | add self-reflection after failures   |
| tree search | explore multiple action branches     |

## sources

- [Building Effective Agents](https://www.anthropic.com/research/building-effective-agents) — canonical loop description
- [ReAct](https://arxiv.org/abs/2210.03629) — reasoning-augmented loop
- [CoALA](https://arxiv.org/abs/2309.02427) — framework for loop variants
