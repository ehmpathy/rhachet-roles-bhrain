# plan-and-solve

## .what

a zero-shot prompting strategy that decomposes complex tasks into two phases: first devise a plan of subtasks, then execute each subtask sequentially.

## .why

plan-and-solve addresses a limitation of direct chain-of-thought: models may rush into computation without strategic planning. by explicitly separating planning from execution, PS prompting improves accuracy on multi-step reasoning tasks without requiring few-shot examples.

## dependsOn

- `reasoning-trace` — plan is a form of reasoning
- `llm` — generates plan and executes steps

## pattern structure

```
Prompt: "Let's first understand the problem and devise a plan
         to solve it. Then, let's carry out the plan and solve
         the problem step by step."

Response:
Plan:
1. Identify the variables
2. Set up the equation
3. Solve for x
4. Verify the answer

Execution:
Step 1: The variables are...
Step 2: The equation is...
Step 3: Solving: x = ...
Step 4: Verification: ...

Answer: x = 42
```

## key characteristics

- **zero-shot**: no examples needed
- **explicit planning**: forces strategic thinking
- **sequential execution**: follows plan order
- **self-contained**: plan and execution in one response

## variants

| variant | modification |
|---------|--------------|
| PS | basic plan + solve |
| PS+ | adds "extract relevant variables" |
| ADaPT | adaptive as-needed decomposition |

## benchmark performance

| benchmark | improvement over zero-shot CoT |
|-----------|-------------------------------|
| GSM8K | +6.6% (GPT-3) |
| AQuA | +6.0% |
| MultiArith | +4.0% |

## vs few-shot CoT

| aspect | PS | few-shot CoT |
|--------|-----|--------------|
| examples needed | 0 | 3-8 |
| planning | explicit | implicit |
| adaptability | high | fixed pattern |

## application in replic brains

many replic brains implement plan-and-solve implicitly:
- "Plan" subagent type
- EnterPlanMode tool
- explicit planning before coding

## sources

- [Plan-and-Solve Prompting](https://arxiv.org/abs/2305.04091) — original paper
- [Understanding LLM Agent Planning Survey](https://arxiv.org/abs/2402.02716) — positions in taxonomy
